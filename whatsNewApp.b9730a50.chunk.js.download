(this.webpackJsonp=this.webpackJsonp||[]).push([[650],{YZXJ:function(e,t,r){"use strict";r.r(t);var a=r("jB52"),s=r("yi8e"),n=r("N50s"),i=r("11kg"),l=r("waGw"),c=r("4ZIW");var o=r("Lzak"),u=r("s1D3"),g=r("MV2A"),h=r("4lAS"),d=r("R0j4"),p=r("bOix"),f={components:{GlBadge:o.a,GlIcon:u.a,GlLink:g.a,GlButton:h.a},directives:{SafeHtml:d.a},props:{feature:{type:Object,required:!0}},computed:{releaseDate(){const{published_at:e}=this.feature,t=new Date(e);return Object(p.J)(t)&&0!==t.getTime()?Object(p.g)(t):""}}},b=r("tBpV"),_=Object(b.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gl-py-6 gl-px-6 gl-border-b-1 gl-border-b-solid gl-border-b-gray-100"},[r("gl-link",{staticClass:"gl-display-block",attrs:{href:e.feature.url,target:"_blank","data-track-event":"click_whats_new_item","data-track-label":e.feature.title,"data-track-property":e.feature.url}},[r("div",{staticClass:"whats-new-item-image gl-bg-size-cover",style:"background-image: url("+e.feature.image_url+");"},[r("span",{staticClass:"gl-sr-only"},[e._v(e._s(e.feature.title))])])]),e._v(" "),r("gl-link",{staticClass:"whats-new-item-title-link gl-display-block gl-mt-4 gl-mb-1",attrs:{href:e.feature.url,target:"_blank","data-track-event":"click_whats_new_item","data-track-label":e.feature.title,"data-track-property":e.feature.url}},[r("h5",{staticClass:"gl-font-lg gl-my-0",attrs:{"data-test-id":"feature-title"}},[e._v(e._s(e.feature.title))])]),e._v(" "),e.releaseDate?r("div",{staticClass:"gl-mb-3",attrs:{"data-testid":"release-date"}},[e._v(e._s(e.releaseDate))]):e._e(),e._v(" "),e.feature.packages?r("div",{staticClass:"gl-mb-3"},e._l(e.feature.packages,(function(t){return r("gl-badge",{key:t,staticClass:"whats-new-item-badge gl-mr-2",attrs:{size:"md"}},[r("gl-icon",{attrs:{name:"license"}}),e._v(e._s(t)+"\n    ")],1)})),1):e._e(),e._v(" "),r("div",{directives:[{name:"safe-html",rawName:"v-safe-html",value:e.feature.body,expression:"feature.body"}],staticClass:"gl-pt-3 gl-line-height-20"}),e._v(" "),r("gl-button",{attrs:{href:e.feature.url,target:"_blank","data-track-event":"click_whats_new_item","data-track-label":e.feature.title,"data-track-property":e.feature.url}},[e._v("\n    "+e._s(e.__("Learn more"))+" "),r("gl-icon",{attrs:{name:"arrow-right"}})],1)],1)}),[],!1,null,null,null).exports,m={components:{GlSkeletonLoader:r("4+8U").a}},w=Object(b.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("gl-skeleton-loader",{attrs:{width:350,height:420}},[r("rect",{attrs:{width:"350",height:"16"}}),e._v(" "),r("rect",{attrs:{y:"25",width:"110",height:"16",rx:"8"}}),e._v(" "),r("rect",{attrs:{x:"115",y:"25",width:"110",height:"16",rx:"8"}}),e._v(" "),r("rect",{attrs:{x:"230",y:"25",width:"110",height:"16",rx:"8"}}),e._v(" "),r("rect",{attrs:{y:"50",width:"350",height:"165",rx:"12"}}),e._v(" "),r("rect",{attrs:{y:"230",width:"480",height:"8"}}),e._v(" "),r("rect",{attrs:{y:"254",width:"560",height:"8"}}),e._v(" "),r("rect",{attrs:{y:"278",width:"320",height:"8"}}),e._v(" "),r("rect",{attrs:{y:"302",width:"480",height:"8"}}),e._v(" "),r("rect",{attrs:{y:"326",width:"560",height:"8"}}),e._v(" "),r("rect",{attrs:{y:"365",width:"80",height:"8"}})])}),[],!1,null,null,null).exports;function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const k=c.a.mixin();var D={components:{GlDrawer:n.a,GlInfiniteScroll:i.a,SkeletonLoader:w,Feature:_},directives:{GlResizeObserver:l.a},mixins:[k],props:{versionDigest:{type:String,required:!0}},computed:y({},Object(s.f)(["open","features","pageInfo","drawerBodyHeight","fetching"])),mounted(){this.openDrawer(this.versionDigest),this.fetchFreshItems();const e=document.querySelector("body").getAttribute("data-namespace-id");this.track("click_whats_new_drawer",{label:"namespace_id",value:e})},methods:y(y({},Object(s.c)(["openDrawer","closeDrawer","fetchItems","setDrawerBodyHeight"])),{},{bottomReached(){const e=this.pageInfo.nextPage;e&&this.fetchFreshItems(e)},handleResize(){const e=function(e){return e.clientHeight-e.getBoundingClientRect().top-e.querySelector(".gl-drawer-header").clientHeight}(this.$refs.drawer.$el);this.setDrawerBodyHeight(e)},fetchFreshItems(e){const{versionDigest:t}=this;this.fetchItems({page:e,versionDigest:t})}})},j=Object(b.a)(D,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("gl-drawer",{directives:[{name:"gl-resize-observer",rawName:"v-gl-resize-observer",value:e.handleResize,expression:"handleResize"}],ref:"drawer",staticClass:"whats-new-drawer gl-reset-line-height",attrs:{"z-index":700,open:e.open},on:{close:e.closeDrawer},scopedSlots:e._u([{key:"header",fn:function(){return[r("h4",{staticClass:"page-title gl-my-2"},[e._v(e._s(e.__("What's new")))])]},proxy:!0}])},[e._v(" "),e.features.length?[r("gl-infinite-scroll",{staticClass:"gl-p-0",attrs:{"fetched-items":e.features.length,"max-list-height":e.drawerBodyHeight},on:{bottomReached:e.bottomReached},scopedSlots:e._u([{key:"items",fn:function(){return e._l(e.features,(function(e){return r("feature",{key:e.title,attrs:{feature:e}})}))},proxy:!0}],null,!1,2291134376)})]:r("div",{staticClass:"gl-mt-5"},[r("skeleton-loader"),e._v(" "),r("skeleton-loader")],1)],2),e._v(" "),e.open?r("div",{staticClass:"whats-new-modal-backdrop modal-backdrop"}):e._e()],1)}),[],!1,null,null,null).exports,E=(r("jaBk"),r("KcQl"),r("2ibD")),S=r("NmEs"),P=r("4bVg");var x={closeDrawer(e){let{commit:t}=e;t("CLOSE_DRAWER")},openDrawer(e,t){let{commit:r}=e;r("OPEN_DRAWER"),t&&localStorage.setItem(P.a,t)},fetchItems(e){let{commit:t,state:r}=e,{page:a,versionDigest:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:null,versionDigest:null};if(r.fetching)return!1;t("SET_FETCHING",!0);const n=s;return E.a.get("/-/whats_new",{params:{page:a,v:n}}).then((function(e){let{data:r,headers:a}=e;t("ADD_FEATURES",r);const s=Object(S.I)(a),{nextPage:n}=Object(S.L)(s);t("SET_PAGE_INFO",{nextPage:n})})).finally((function(){t("SET_FETCHING",!1)}))},setDrawerBodyHeight(e,t){let{commit:r}=e;r("SET_DRAWER_BODY_HEIGHT",t)}},R={CLOSE_DRAWER(e){e.open=!1},OPEN_DRAWER(e){e.open=!0},ADD_FEATURES(e,t){e.features=e.features.concat(t)},SET_PAGE_INFO(e,t){e.pageInfo=t},SET_FETCHING(e,t){e.fetching=t},SET_DRAWER_BODY_HEIGHT(e,t){e.drawerBodyHeight=t}};a.default.use(s.b);var I=new s.b.Store({actions:x,mutations:R,state:{open:!1,features:[],fetching:!1,drawerBodyHeight:null,pageInfo:{nextPage:null}}});function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let G;t.default=function(e){G?I.dispatch("openDrawer"):G=new a.default({el:e,store:I,components:{App:j},computed:H({},Object(s.f)(["open"])),watch:{open(){Object(P.c)(e)}},render:t=>t("app",{props:{versionDigest:Object(P.b)(e)}})})}}}]);
//# sourceMappingURL=whatsNewApp.b9730a50.chunk.js.map